# Chapter5アセスメント

## 試験概要

CSVを使ったタスク管理アプリケーションを実装します。

設問の内容と以下条件に沿って機能を追加してください。

- 出力例とJavadocをもとに必要な処理を実装すること
- 数値の判定は`isNumeric`メソッドを実装し利用すること
- IOExceptionはキャッチし`printStackTrace();`を呼び出すこと

- 実装前に処理フローをコメントアウトで記述すること
- 実装完了後、自己採点（動作確認）を行うこと
- 自己採点完了後、次の設問に進むこと
- 全てのプログラムが実行可能であること
- コンパイルエラー状態での提出は禁止
- 出力内容やメソッド名が指示通りでない場合は不正解となる
- 実行時に`Build failed, do you want to continue.`という警告が出たときは`continue`を選択すると実行可能

### CSVデータの仕様

**users.csv**

以下ユーザーデータを保存するファイルです。

- Code：ユーザーのコード（整数）
- Name：ユーザー名（文字列）
- Email：メールアドレス（文字列）
- Password：パスワード（文字列）

```
Code,Name,Email,Password
1,鈴木一郎,test1@example.com,password1
2,鈴木二郎,test2@example.com,password2
```

**tasks.csv**

以下タスクデータを保存するファイルです

- Code：タスクのコード（整数）
- Name：タスク名（文字列）
- Status：タスクのステータス（整数）
    - 0→未着手、1→着手中、2→完了
- Rep_User_Code：タスクを担当するユーザーコード（整数）

```
Code,Name,Status,Rep_User_Code
1,taskA,0,1
2,taskB,0,2
3,taskC,2,2
4,taskD,1,2
```

**logs.csv**

タスクのステータスが変更されたときのログデータを保存するファイルです

- Task_Code：ステータスが変更されたタスクのコード（整数）
- Change_User_Code：タスクのステータスを変更したユーザーコード（整数）
- Status：変更したステータス（整数）
    - 0→未着手、1→着手中、2→完了
- Change_Date：タスクのステータスを変更した日付（日付）

```
Task_Code,Change_User_Code,Status,Change_Date
1,1,0,2024-01-10
2,1,0,2024-01-10
3,1,0,2024-01-10
4,1,0,2024-01-10
3,2,1,2024-01-11
3,2,2,2024-01-12
4,2,1,2024-01-13
```

## 設問1

以下条件を基にログイン機能を実装してください。

**出力例**

```
タスク管理アプリケーションにようこそ!!
メールアドレスを入力してください：hogefuga@example.com
パスワードを入力してください：password1
既に登録されているメールアドレス、パスワードを入力してください

メールアドレスを入力してください：test1@example.com
パスワードを入力してください：hogefuga
既に登録されているメールアドレス、パスワードを入力してください

メールアドレスを入力してください：test1@example.com
パスワードを入力してください：password1
ユーザー名：鈴木一郎でログインしました。

以下1~3のメニューから好きな選択肢を選んでください。
1. タスク一覧, 2. タスク新規登録, 3. ログアウト
```

## 設問2

以下条件を基に `tasks.csv` のデータを一覧表示する機能を実装してください。

- ログイン後に表示されるメインメニューから選択できるようにすること
- `status` の値に応じて表示を変えるようにすること
    - 0→未着手、1→着手中、2→完了
- タスクを担当するユーザーの名前が表示できるようにすること
    - 担当者が今ログインしてるユーザーなら、「あなたが担当しています」と表示する
        - そうでないなら、担当してるユーザー名を表示する

**出力例（鈴木一郎でログインした場合）**

```
以下1~3のメニューから好きな選択肢を選んでください。
1. タスク一覧, 2. タスク新規登録, 3. ログアウト
選択肢：1

1. タスク名：taskA, 担当者名：あなたが担当しています, ステータス：未着手
2. タスク名：taskB, 担当者名：鈴木二郎が担当しています, ステータス：未着手
3. タスク名：taskC, 担当者名：鈴木二郎が担当しています, ステータス：完了
4. タスク名：taskD, 担当者名：鈴木二郎が担当しています, ステータス：着手中
```

## 設問3

以下条件を基にタスク新規登録機能を実装してください。

- ログイン後に表示されるメインメニューから選択できるようにすること
- タスクコード、タスク名、タスクを担当するユーザーコードを入力させ、以下の仕様でバリデーションを行うこと
    - タスクコードは数字か
    - タスク名は10文字以内か
    - タスクを担当するユーザーコードは数字か
- 担当するユーザーコードが `users.csv`に登録されていない場合、例外をスローする
- `tasks.csv`にデータを1件作成する
    - `Status`は `0`
- `logs.csv`にデータを1件作成する
    - `Status`は `0`
    - `Change_User_Code`は今ログインしてるユーザーコード
    - `Change_Date`は今日の日付

**出力例（鈴木一郎でログインした場合）**

```
以下1~3のメニューから好きな選択肢を選んでください。
1. タスク一覧, 2. タスク新規登録, 3. ログアウト
選択肢：2

タスクコードを入力してください：test
コードは半角の数字で入力してください

タスクコードを入力してください：5
タスク名を入力してください：taskEtaskEt
タスク名は10文字以内で入力してください

タスクコードを入力してください：5
タスク名を入力してください：taskE
担当するユーザーのコードを選択してください：test
ユーザーのコードは半角の数字で入力してください

タスクコードを入力してください：5
タスク名を入力してください：taskE
担当するユーザーのコードを選択してください：50000
存在するユーザーコードを入力してください

タスクコードを入力してください：5
タスク名を入力してください：taskE
担当するユーザーのコードを選択してください：2
taskEの登録が完了しました。
```

## 設問4

以下条件を基にタスクのステータスを更新する機能を実装してください。

- タスク一覧表示後に、ステータス更新機能を選択できるメニューを追加すること
- ステータスを変更するタスクコード、変更後のステータス（1または2）を入力させ、以下の仕様でバリデーションを行うこと
    - タスクコードは数字か
    - 変更後のステータスは数字か
    - 変更後のステータスは、1または2か
- 入力されたタスクコードが `tasks.csv`に存在しない場合、例外をスローすること
- `tasks.csv`に存在するタスクのステータスが、変更後のステータスの1つ前じゃない場合、例外をスローすること
    - 変更可能な例：「未着手」から「着手中」、または「着手中」から「完了」
    - 変更できない例：「未着手」から「完了」、「着手中」から「着手中」、「完了」から他のステータス
- `tasks.csv`の該当タスクのステータスを変更後のステータスに更新する
- `logs.csv`にデータを1件作成する
    - `Status`は変更後のステータス
    - `Change_User_Code`は今ログインしてるユーザーコード
    - `Change_Date`は今日の日付

**出力例（鈴木一郎でログインした場合）**

```
1. タスク名：taskA, 担当者名：あなたが担当しています, ステータス：未着手
2. タスク名：taskB, 担当者名：鈴木二郎が担当しています, ステータス：未着手
3. タスク名：taskC, 担当者名：鈴木二郎が担当しています, ステータス：完了
4. タスク名：taskD, 担当者名：鈴木二郎が担当しています, ステータス：着手中
5. タスク名：taskE, 担当者名：鈴木二郎が担当しています, ステータス：未着手
以下1~2から好きな選択肢を選んでください。
1. タスクのステータス変更, 2. メインメニューに戻る
選択肢：1

ステータスを変更するタスクコードを入力してください：test
コードは半角の数字で入力してください

ステータスを変更するタスクコードを入力してください：5
どのステータスに変更するか選択してください。
1. 着手中, 2. 完了
選択肢：test
ステータスは半角の数字で入力してください

ステータスを変更するタスクコードを入力してください：5
どのステータスに変更するか選択してください。
1. 着手中, 2. 完了
選択肢：3
ステータスは1・2の中から選択してください。

ステータスを変更するタスクコードを入力してください：5
どのステータスに変更するか選択してください。
1. 着手中, 2. 完了
選択肢：2
ステータスは、前のステータスより1つ先のもののみを選択してください

ステータスを変更するタスクコードを入力してください：5
どのステータスに変更するか選択してください。
1. 着手中, 2. 完了
選択肢：1
ステータスの変更が完了しました。
```

## 設問5

以下条件を基にタスクを削除する機能を実装してください。

- タスク一覧表示後のメニューに、削除用の選択肢を追加すること
- 削除するタスクコードを入力させ、以下の仕様でバリデーションを行うこと
    - 入力されたタスクコードは数字か
- 削除対象のタスクコードのステータスが「完了」じゃない場合、例外をスローすること
- `tasks.csv`の該当タスクデータを削除すること
- `logs.csv`の該当タスクコードがあるデータを全て削除すること

**出力例（鈴木一郎でログインした場合）**

```
1. タスク名：taskA, 担当者名：あなたが担当しています, ステータス：未着手
2. タスク名：taskB, 担当者名：鈴木二郎が担当しています, ステータス：未着手
3. タスク名：taskC, 担当者名：鈴木二郎が担当しています, ステータス：完了
4. タスク名：taskD, 担当者名：鈴木二郎が担当しています, ステータス：着手中
5. タスク名：taskE, 担当者名：鈴木二郎が担当しています, ステータス：未着手
以下1~3から好きな選択肢を選んでください。
1. タスクのステータス変更, 2. タスク削除, 3. メインメニューに戻る
選択肢：2

削除するタスクコードを入力してください：3
taskCの削除が完了しました。